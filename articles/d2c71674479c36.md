---
title: "WSL2でmise uvを用いたPython環境を作成する"
emoji: "🚀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["python", "wsl", "windows", "vscode"]
published: false
---
# WSL2 + Python 開発環境構築ガイド

このノートでは、Windows Subsystem for Linux 2 (WSL2) を利用して、Python開発環境を構築する手順をまとめます。

## 1. WSL のインストール

まずはWSL2をWindowsにインストールします。

-   インストール可能なWSLディストリビューションを確認します。

    ```terminal
    wsl --list --online
    ```

-   上記で選定したバージョンをインストールします（例: Ubuntu 22.04）。

    ```terminal
    wsl --install -d Ubuntu-22.04
    ```
-   WSLの初回起動時に、ユーザー名とパスワードを設定します。

## 2. VS Code のインストールと設定

Windows側にVS Codeをインストールし、必要な拡張機能を導入します。

-   VS Codeをインストールします。
	- [ここ](https://code.visualstudio.com/download)からwindowsインストーラーをダウンロード
	- インストーラーに従いインストール
-   VS Codeの拡張機能として、日本語パック、Python関連の拡張機能などをインストールします。
-   **必須**：`Remote Development` 拡張機能を必ずインストールしてください。これにより、WSL内のファイルや環境をVS Codeから直接操作できるようになります。

## 3. mise のインストール

`mise` は、複数のプログラミング言語のバージョン管理を簡単に行えるツールです。

-   WSL内で、`mise` のインストールに必要なパッケージを導入します。

    ```bash
    sudo apt update && sudo apt install -y gpg wget curl
    ```

-   GPGキーとAPTリポジトリを追加します。

    ```bash
    sudo install -dm 755 /etc/apt/keyrings
    wget -qO - https://mise.jdx.dev/gpg-key.pub | gpg --dearmor | sudo tee /etc/apt/keyrings/mise-archive-keyring.gpg > /dev/null
    echo "deb [signed-by=/etc/apt/keyrings/mise-archive-keyring.gpg arch=amd64] https://mise.jdx.dev/deb stable main" | sudo tee /etc/apt/sources.list.d/mise.list
    ```

-   `mise` をインストールします。

    ```bash
    sudo apt update
    sudo apt install -y mise
    ```

-   `mise` をシェルで使用可能にする設定を `~/.bashrc` に追加し、シェルをリロードします。

    ```bash
    echo 'eval "$(mise activate bash)"' >> ~/.bashrc
    source ~/.bashrc # これはmise run では実行できません
    ```

-   `mise` のワーニング無効化処理（`idiomatic_version_file_enable_tools` の設定）を行います。

    ```bash
    mise settings add idiomatic_version_file_enable_tools "[]"
    ```

-   `mise` の設定ファイル `config.toml` を作成します。

    ```bash
    sudo apt install gedit # テキストエディタのインストール
    mkdir -p ~/.config/mise # フォルダを作成
    gedit ~/.config/mise/config.toml # 設定ファイルを編集する
    ```

    以下の内容を `~/.config/mise/config.toml` に記述し保存します。

    ```toml
    [tasks.edit_toml]
description = "edit toml file"
run = "gedit ~/.config/mise/config.toml"
    ```

    これで、`mise run edit_toml` コマンドで設定ファイルを編集できるようになります。

## 4. Python のインストール (mise を利用)

`mise` を使ってPythonをインストールし、バージョンを管理します。

-   利用可能なPythonのバージョンを確認します。

    ```bash
    mise ls-remote python
    ```

-   Python 3.13 をグローバル設定し、インストールします（他のバージョンをグローバルにしたい場合もこのコマンドを使います）。

    ```bash
    mise use -g python@3.13
    ```

-   インストールされたPythonのバージョンを確認します。

    ```bash
    mise ls
    ```

## 5. uv のインストール

`uv` は `pip` に代わる高速なパッケージマネージャです。

-   `uv` をインストールします。

    ```bash
    curl -LsSf https://astral.sh/uv/install.sh | sh
    ```

-   シェルをリロードします。

    ```bash
    exec $SHELL
    ```

## 6. プロジェクトの作成と VS Code での作業

-   任意のプロジェクトフォルダを作成します。

    ```bash
    mkdir uv_test
    cd uv_test
    ```

-   VS Codeを起動し、WSL内のプロジェクトフォルダを開きます。

    ```bash
    code .
    ```

-   VS Codeの拡張機能 `Python` をインストールします。
-   インストール後、VS Codeのインタープリターを選択する際に、`mise` でインストールしたPythonを選択します。
-   VS Codeでターミナルを立ち上げ、`uv` を初期化します。これにより、設定ファイルなどが作成されます。

    ```bash
    uv init
    ```

-   仮想環境を作成し、必要なパッケージをインストールします。

    ```bash
    uv sync
    ```

-   VS Codeの仮想環境パスを設定します。
    -   `Ctrl + ,` (カンマ) でVS Codeの設定を開きます。
    -   ワークスペースを選択し、検索窓に `python interpreter` と入力します。
    -   入力欄に仮想環境のパスを設定します: `.venv/bin/python`
    -   インタープリターを選択する図を参照してください。
-   VS Codeで新しいターミナルを立ち上げ、ターミナルの先頭が作成した作業フォルダ名になっていればOKです。

## 7. ライブラリのインストール

-   Jupyter Notebook を利用するためのライブラリをインストールします。

    ```bash
    uv add ipykernel
    ```

-   その他の必要なライブラリをインストールします。

    ```bash
    uv add *** # 例: uv add numpy pandas
    ```
